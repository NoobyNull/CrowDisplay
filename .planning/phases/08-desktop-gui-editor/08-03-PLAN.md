---
phase: 08-desktop-gui-editor
plan: 03
type: execute
wave: 3
depends_on: ["08-02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "User opens editor, sees visual button grid with colored buttons and labels"
    - "User clicks a button, edits label/color/icon/shortcut in the side panel"
    - "User can add, remove, rename, and reorder pages"
    - "User saves config to local JSON file and loads it back"
    - "Saved JSON has correct format: UTF-8 icon strings, Arduino keycodes, integer colors"
  artifacts: []
  key_links: []
---

<objective>
Verify the complete editor workflow end-to-end by human testing.

Purpose: Confirm all Phase 8 success criteria are met before marking the phase complete.
Output: Human verification that the editor produces correct, deployable configs.
</objective>

<execution_context>
@/home/matthew/.claude/get-shit-done/workflows/execute-plan.md
@/home/matthew/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/08-desktop-gui-editor/08-01-SUMMARY.md
@.planning/phases/08-desktop-gui-editor/08-02-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 1: Verify editor app end-to-end</name>
  <files>N/A</files>
  <action>Human verification checkpoint - see how-to-verify section below for full testing procedure</action>
  <verify>Human approval via resume-signal after completing verification steps</verify>
  <done>User types "approved" to confirm all Phase 8 success criteria met, or reports issues for fixing</done>
  <what-built>
Complete PySide6 desktop editor for CrowPanel hotkey configuration:
- Visual 4x3 button grid with color-coded buttons and labels
- Side panel for editing button properties (label, description, color, icon, shortcut)
- Keyboard shortcut recorder with Qt-to-Arduino keycode translation
- Icon picker with LVGL symbol list (UTF-8 byte storage)
- Media key support via dropdown (Play/Pause, Volume, etc.)
- Page management: add, remove, rename, reorder
- File I/O: New, Open JSON, Save JSON
- Deploy dialog with device connection test and WiFi upload
  </what-built>
  <how-to-verify>
1. Launch the editor: `cd /data/Elcrow-Display-hotkeys && python3 companion/crowpanel_editor.py`
2. Verify: 4x3 button grid appears on the left with colored buttons. Right panel shows editing controls.
3. Click any button in the grid. Verify the side panel populates with that button's properties.
4. Change the label to "Test". Verify the grid button updates to show "Test".
5. Click "Choose Color" and pick a light color (e.g. yellow). Verify the button text is dark/black for contrast.
6. Select a different icon from the icon picker dropdown. Verify the selection changes.
7. Click the shortcut recorder button, then press "Ctrl+A". Verify it shows "Ctrl+A" and the values are modifiers=1, keycode=97.
8. Switch action type to "Media Key". Verify the shortcut recorder hides and a media key dropdown appears.
9. Select "Play/Pause" from the media key dropdown.
10. Click "Next >" to switch pages. Click "+ Add Page" to add a page. Click "Rename" to rename it.
11. File > Save -- save to /tmp/test_config.json.
12. Open /tmp/test_config.json in a text editor. Verify:
    - Icons are UTF-8 characters (not "LV_SYMBOL_HOME" strings)
    - Colors are integers (not hex strings)
    - Keycodes are Arduino HID values (not Qt key values)
    - The media key button has action_type=1 and a nonzero consumer_code
13. File > Open -- reload the same file. Verify all values display correctly.
14. (Optional, if device available): Connect to CrowPanel-Config WiFi, click Deploy, test connection, deploy.
  </how-to-verify>
  <resume-signal>Type "approved" to mark Phase 8 complete, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Human confirms all Phase 8 success criteria are met by testing the editor application.
</verification>

<success_criteria>
Editor launches, grid displays correctly, button editing works, file save/load preserves all data in correct device format, and (optionally) WiFi deploy succeeds.
</success_criteria>

<output>
After completion, create `.planning/phases/08-desktop-gui-editor/08-03-SUMMARY.md`
</output>
